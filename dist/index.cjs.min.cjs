"use strict";var r=require("react/jsx-runtime"),e=require("react"),a=require("generaltranslation");require("generaltranslation/internal");var n=function(){return n=Object.assign||function(r){for(var e,a=1,n=arguments.length;a<n;a++)for(var t in e=arguments[a])Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r},n.apply(this,arguments)};function t(r,e){var a={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(a[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var t=0;for(n=Object.getOwnPropertySymbols(r);t<n.length;t++)e.indexOf(n[t])<0&&Object.prototype.propertyIsEnumerable.call(r,n[t])&&(a[n[t]]=r[n[t]])}return a}function i(r,e,a,n){return new(a||(a=Promise))((function(t,i){function o(r){try{s(n.next(r))}catch(r){i(r)}}function l(r){try{s(n.throw(r))}catch(r){i(r)}}function s(r){var e;r.done?t(r.value):(e=r.value,e instanceof a?e:new a((function(r){r(e)}))).then(o,l)}s((n=n.apply(r,e||[])).next())}))}function o(r,e){var a,n,t,i={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(s){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(a=1,n&&(t=2&l[0]?n.return:l[0]?n.throw||((t=n.return)&&t.call(n),0):n.next)&&!(t=t.call(n,l[1])).done)return t;switch(n=0,t&&(l=[2&l[0],t.value]),l[0]){case 0:case 1:t=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(t=i.trys,(t=t.length>0&&t[t.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!t||l[1]>t[0]&&l[1]<t[3])){i.label=l[1];break}if(6===l[0]&&i.label<t[1]){i.label=t[1],t=l;break}if(t&&i.label<t[2]){i.label=t[2],i.ops.push(l);break}t[2]&&i.ops.pop(),i.trys.pop();continue}l=e.call(r,i)}catch(r){l=[6,r],n=0}finally{a=t=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}}"function"==typeof SuppressedError&&SuppressedError;var l=e.createContext(void 0);function s(r){void 0===r&&(r="useGTContext() must be used within a <GTProvider>!");var a=e.useContext(l);if(void 0===a)throw new Error(r);return a}function u(){return s("useDefaultLocale(): Unable to access default locale outside of a <GTProvider>").defaultLocale}function c(){return s("useLocale(): Unable to access user's locale outside of a <GTProvider>").locale}function v(r){return r&&r.props&&r.props["data-generaltranslation"]?r.props["data-generaltranslation"]:null}var d={variable:"value",number:"n",datetime:"date",currency:"cost"};function p(r){var e,a=(null===(e=r["data-generaltranslation"])||void 0===e?void 0:e.variableType)||"variable";return{variableType:a,variableName:r.name||r["data-_gt-variable-name"]||d[a],variableValue:void 0!==r.value?r.value:void 0!==r["data-_gt-unformatted-value"]?r["data-_gt-unformatted-value"]:void 0!==r.children?r.children:void 0,variableOptions:r.options||r["data-_gt-variable-options"]||void 0}}function f(e){var n=void 0===e?{name:"n"}:e,t=n.children,i=n.name,o=void 0===i?"n":i,l=n.value,s=n.options,v=void 0===s?{}:s,d=[c(),u()],p=void 0!==t?t:l;return"number"==typeof(p="string"==typeof p?parseFloat(p):p)&&(p=a.formatNum({value:p,languages:d,options:v})),r.jsx("span",{"data-_gt-variable-name":o,"data-_gt-variable-type":"number","data-_gt-variable-options":JSON.stringify(v),children:p})}function b(e){var a=e.children,n=e.name,t=e.value,i=void 0!==a?a:t;return r.jsx("span",{"data-_gt-variable-name":n,"data-_gt-variable-type":"variable",children:i})}function h(e){var t=void 0===e?{name:"cost"}:e,i=t.children,o=t.name,l=void 0===o?"cost":o,s=t.value,v=t.currency,d=void 0===v?"USD":v,p=t.options,f=void 0===p?{}:p,b=[c(),u()],h=void 0!==i&&void 0===s?i:s;return"number"==typeof(h="string"==typeof h?parseFloat(h):h)&&(h=a.formatCurrency({value:h,languages:b,currency:d,options:f})),r.jsx("span",{"data-_gt-variable-name":l,"data-_gt-variable-type":"currency","data-_gt-variable-options":n({style:"currency",currency:d},f),children:h})}function g(e){var n,t,i=void 0===e?{name:"date"}:e,o=i.children,l=i.name,s=void 0===l?"date":l,v=i.value,d=i.options,p=void 0===d?{}:d,f=[c(),u()],b=void 0!==o&&void 0===v?o:v;return"number"==typeof b||"string"==typeof b?t=new Date(b):b instanceof Date&&(t=b),void 0!==t&&(n=a.formatDateTime({value:t,languages:f,options:p}).replace(/[\u200F\u202B\u202E]/g,"")),r.jsx("span",{"data-_gt-variable-name":s,"data-_gt-variable-type":"date","data-_gt-variable-options":p,children:n})}function m(r){if(r&&"object"==typeof r&&"string"==typeof r.key){var e=Object.keys(r);if(1===e.length)return!0;if(2===e.length){var a=r;return"string"==typeof a.variable&&["variable","number","date","currency"].includes(a.variable)}}return!1}f.gtTransformation="variable-number",b.gtTransformation="variable-variable",h.gtTransformation="variable-currency",g.gtTransformation="variable-datetime";var y="generaltranslation-locale",w="en",O=["singular","plural","dual","zero","one","two","few","many","other"];var x={};function j(r,a,i){void 0===i&&(i=0);var o=i,l=function(r){var e=r.type,a=r.props,n={id:o+=1},i="function"==typeof e&&e.gtTransformation||"";if(i){var l=i.split("-");if("variable"===l[0]&&(n.variableType=(null==l?void 0:l[1])||"variable"),"plural"===l[0]){var s=Object.entries(a).reduce((function(r,e){var a,n=e[0],t=e[1];return a=n,O.includes(a)&&(r[n]=j(t,n,o)),r}),{});Object.keys(s).length&&(n.branches=s)}if("branch"===l[0]){a.children,a.branch;var u=t(a,["children","branch"]),c=Object.entries(u).reduce((function(r,e){var a=e[0],n=e[1];return r[a]=j(n,a,o),r}),{});Object.keys(c).length&&(n.branches=c)}n.transformation=l[0]}return n};function s(r){if(e.isValidElement(r)){var t=r.props,i=l(r),o=n(n({},t),{"data-generaltranslation":i});return a&&(o.key=a,a=void 0),t.children&&(o.children=u(t.children)),e.cloneElement(r,o)}return r}function u(r){return Array.isArray(r)?(a=void 0,e.Children.map(r,s)):s(r)}return u(r)}function T(r,e,a){var n="",t=null;return"number"==typeof r&&!t&&a&&(n=function(r,e,a){var n=new Intl.PluralRules(e).select(r),t=Math.abs(r);if(0===t&&a.zero)return"zero";if(1===t){if(a.singular)return"singular";if(a.one)return"one"}if("one"===n&&a.singular)return"singular";if(2===t){if(a.dual)return"dual";if(a.two)return"two"}return"two"===n&&a.dual?"dual":a[n]?n:"two"===n&&a.dual?"dual":"two"===n&&a.plural?"plural":"two"===n&&a.other?"other":"few"===n&&a.plural?"plural":"few"===n&&a.other?"other":"many"===n&&a.plural?"plural":"many"===n&&a.other?"other":"other"===n&&a.plural?"plural":""}(r,e,a)),n&&!t&&(t=a[n]),t}function E(e){var a=e.variableType,n=e.variableName,t=e.variableValue,i=e.variableOptions;return"number"===a?r.jsx(f,{name:n,value:t,options:i}):"datetime"===a?r.jsx(g,{name:n,value:t,options:i}):"currency"===a?r.jsx(h,{name:n,value:t,options:i}):r.jsx(b,{name:n,value:t})}function _(r){var a,t=r.sourceElement,i=r.targetElement,o=r.variables,l=void 0===o?{}:o,s=r.variablesOptions,u=void 0===s?{}:s,c=r.locales,v=void 0===c?[w]:c,d=t.props,p=d["data-generaltranslation"],f=null==p?void 0:p.transformation;if("plural"===f){var b="number"==typeof l.n?l.n:"number"==typeof t.props.n?t.props.n:t.props["data-_gt-n"],h=T(b,v,p.branches||{})||t.props.children,g=T(b,v,i.props["data-generaltranslation"].branches||{})||i.props.children;return e.createElement("span",n(n({},d),{"data-generaltranslation":void 0,children:k({source:h,target:g,variables:l,variablesOptions:u,locales:v})}))}if("branch"===f){var m=d.name,y=d.branch,O=d.children;y=l[m=m||t.props["data-_gt-name"]||"branch"]||y||t.props["data-_gt-branch-name"];h=(p.branches||{})[y]||O,g=(i.props["data-generaltranslation"].branches||{})[y]||i.props.children;return e.createElement("span",n(n({},d),{"data-generaltranslation":void 0,children:k({source:h,target:g,variables:l,variablesOptions:u,locales:v})}))}return(null==d?void 0:d.children)&&(null===(a=i.props)||void 0===a?void 0:a.children)?e.cloneElement(t,n(n({},d),{"data-generaltranslation":void 0,children:k({source:d.children,target:i.props.children,variables:l,variablesOptions:u,locales:v})})):t}function k(a){var t=a.source,i=a.target,o=a.variables,l=void 0===o?{}:o,s=a.variablesOptions,u=void 0===s?{}:s,c=a.locales,d=void 0===c?[w]:c;if(null==i&&t)return t;if("string"==typeof i)return i;if(Array.isArray(t)&&Array.isArray(i)){var f=t.filter((function(r){if(e.isValidElement(r)){var a=v(r);if(p(r.props),"variable"!==(null==a?void 0:a.transformation))return!0;var t=p(r.props),i=t.variableName,o=t.variableValue,s=t.variableOptions;void 0===l[i]&&(l[i]=o),u[i]=n(n({},u[i]),s)}}));return i.map((function(a,n){if("string"==typeof a)return r.jsx(e.Fragment,{children:a},"string_".concat(n));if(m(a))return r.jsx(e.Fragment,{children:E({variableType:a.variable||"variable",variableName:a.key,variableValue:l[a.key],variableOptions:u[a.key]})},"var_".concat(n));var t,i=(t=a,f.find((function(r){var e,a,n=v(r);return void 0!==(null==n?void 0:n.id)&&n.id===(null===(a=null===(e=null==t?void 0:t.props)||void 0===e?void 0:e["data-generaltranslation"])||void 0===a?void 0:a.id)})));return i?r.jsx(e.Fragment,{children:_({sourceElement:i,targetElement:a,variables:l,variablesOptions:u,locales:d})},"element_".concat(n)):void 0}))}if(i&&"object"==typeof i&&!Array.isArray(i)){var b=m(i)?"variable":"element";if(e.isValidElement(t)){if("element"===b)return _({sourceElement:t,targetElement:i,variables:l,variablesOptions:u,locales:d});var h=v(t);if("variable"===(null==h?void 0:h.transformation)){var g=p(t.props),y=g.variableName,O=g.variableValue,x=g.variableOptions;void 0===l[y]&&(l[y]=O),u[y]=n(n({},u[y]),x)}}if("variable"===b){var j=i;return E({variableType:j.variable||"variable",variableName:j.key,variableValue:l[j.key],variableOptions:u[j.key]})}}return t}function L(r){var a=r.children,i=r.variables,o=void 0===i?{}:i,l=r.variablesOptions,s=void 0===l?{}:l,u=r.defaultLocale,c=void 0===u?w:u,d=function(r){if(e.isValidElement(r)){var a=v(r);if("variable"===(null==a?void 0:a.transformation)){var i=p(r.props),l=i.variableName,u=i.variableType,d=i.variableValue,b=i.variableOptions;return E({variableName:l,variableType:u,variableValue:d=void 0!==o[l]?o[l]:d,variableOptions:n(n({},s[l]),b)})}if("plural"===(null==a?void 0:a.transformation)){var h="number"==typeof o.n?o.n:"number"==typeof r.props.n?r.props.n:r.props["data-_gt-n"],g=a.branches||{};return e.createElement("span",n(n({},r.props),{"data-generaltranslation":void 0,children:f(T(h,[c],g)||r.props.children)}))}if("branch"===(null==a?void 0:a.transformation)){var m=r.props;m.children;var y=m.name,w=m.branch;g=t(m,["children","name","branch"]);return y=y||r.props["data-_gt-name"]||"branch",w=o[y]||w||r.props["data-_gt-branch-name"],g=a.branches||{},e.createElement("span",n(n({},r.props),{"data-generaltranslation":void 0,children:f(g[w])}))}if(r.props.children)return e.cloneElement(r,n(n({},r.props),{"data-generaltranslation":void 0,children:f(r.props.children)}))}return r},f=function(r){return Array.isArray(r)?e.Children.map(r,d):d(r)};return f(a)}function P(r){void 0===r&&(r="");var e=function(e){return r?"".concat(r,".").concat(e):e},a=s("useGT('".concat(r,"'): No context provided. You're trying to get the t() function on the client, which can only be done inside a <GTProvider>.")).translate;return function(r,n,t){void 0===r&&(r=""),void 0===n&&(n={});var i=e(r),o=a?a(i,n,t):void 0;return o||console.warn("t('".concat(r,"') finding no translation for dictionary item ").concat(i," !")),o}}function A(r,n,t){void 0===r&&(r=w),void 0===n&&(n=y);var i=e.useState(""),o=i[0],l=i[1];return e.useEffect((function(){var e,i=(n?function(r){void 0===r&&(r=y);for(var e=0,a=document.cookie.split("; ");e<a.length;e++){var n=a[e].split("="),t=n[0],i=n[1];if(t===r)return decodeURIComponent(i)}return null}(n):void 0)||(t?a.determineLanguage(navigator.languages,t):void 0)||(null===(e=navigator.languages)||void 0===e?void 0:e[0])||navigator.language||(null===navigator||void 0===navigator?void 0:navigator.userLanguage)||r;l(i)}),[r,t]),o}function V(e){var a=e.children,n=e.n,i=t(e,["children","n"]),o=i["data-generaltranslation"],l=t(i,["data-generaltranslation"]),s=c(),v=u();if("number"!=typeof n)throw new Error('Plural with children "'.concat(a,'" requires "n" option.'));var d=T(n,[s,v],l)||a;return r.jsx("span",{"data-generaltranslation":o,"data-_gt-n":n,children:d})}function C(e){var a=e.children,n=e.name,i=void 0===n?"branch":n,o=e.branch,l=t(e,["children","name","branch"]),s=l["data-generaltranslation"],u=t(l,["data-generaltranslation"]),c=o&&void 0!==u[o]?u[o]:a;return r.jsx("span",{"data-generaltranslation":s,"data-_gt-name":i||"branch","data-_gt-branch-name":o,children:c})}V.gtTransformation="plural",C.gtTransformation="branch",exports.Branch=C,exports.Currency=h,exports.DateTime=g,exports.GTProvider=function(n){var t=this,s=n.children,u=n.projectID,c=n.dictionary,v=void 0===c?x:c,d=n.dictionaryName,p=void 0===d?"default":d,f=n.locales,b=n.defaultLocale,h=void 0===b?(null==f?void 0:f[0])||w:b,g=n.locale,m=n.cacheURL,O=void 0===m?"https://cache.gtx.dev":m;if(!u&&"https://cache.gtx.dev"===O)throw new Error("gt-react Error: General Translation cloud services require a project ID! Find yours at www.generaltranslation.com/dashboard.");var T=A(h,y,f);g=g||T,f&&(g=a.determineLanguage([g,T],f)||g);var E=a.requiresTranslation(h,g,f),_=e.useState(O?null:{}),P=_[0],V=_[1];e.useEffect((function(){P||(E?i(t,void 0,void 0,(function(){var r;return o(this,(function(e){switch(e.label){case 0:return[4,fetch("".concat(O,"/").concat(u,"/").concat(g,"/").concat(p))];case 1:return[4,e.sent().json()];case 2:return r=e.sent(),V(r),[2]}}))})):V({}))}),[P,E]);var C=e.useCallback((function(r,n,t){void 0===n&&(n={});var i=function(r){if(Array.isArray(r)){if(1===r.length)return{entry:r[0]};if(2===r.length)return{entry:r[0],metadata:r[1]}}return{entry:r}}(function(r,a){if(!a||"string"!=typeof a)throw new Error('Invalid dictionary id: "'.concat(a,'"'));for(var n=r,t=0,i=a.split(".");t<i.length;t++){var o=i[t];if("object"!=typeof n||Array.isArray(n)||e.isValidElement(n))throw new Error('Invalid dictionary id: "'.concat(a,'"'));n=n[o]}return n}(v,r)),o=i.entry,l=i.metadata;if(null!=o){var s,u;n&&(s=n,(null==l?void 0:l.variablesOptions)&&(u=l.variablesOptions)),"function"==typeof t?o=t(n):"function"==typeof o&&(o=o(n));var c=j(o,r);if(!E)return"string"==typeof c?a.renderContentToString(c,h,s,u):L({children:c,variables:s,variablesOptions:u,defaultLocale:h});if(P){var d=P[r];return"string"==typeof c?a.renderContentToString(d.t,[g,h],s,u):k({source:c,target:d.t,variables:s,variablesOptions:u,locales:[g,h]})}}else console.warn('Dictionary entry with id "'.concat(r,'" is null or undefined'))}),[v,P,E,h]);return r.jsx(l.Provider,{value:{translate:C,locale:g,defaultLocale:h,translations:P},children:P&&T?s:void 0})},exports.Num=f,exports.Plural=V,exports.T=function(i){var o=i.children,l=i.id,v=t(i,["children","id"]);if(!l)throw new Error("Client-side <T> with no provided 'id' prop. Children: ".concat(o));var d=v.variables,p=v.variablesOptions,f=s('<T id="'.concat(l,'"> used on the client-side outside of <GTProvider>')).translations,b=P();if(!o)return r.jsx(e.Fragment,{children:b(l,n({variables:d},p&&{variablesOptions:p}))},l);var h=c(),g=u(),m=e.useMemo((function(){return j(o)}),[o]);if(!(!!h&&!a.isSameLanguage(h,g)))return L({children:m,variables:d,variablesOptions:p,defaultLocale:g});var y=f[l];if(!y||!y.t)throw new Error('<T id="'.concat(l,'"> is used in a client component without a corresponding translation.'));return k({source:m,target:y.t,variables:d,variablesOptions:p,locales:[h,g]})},exports.Var=b,exports.useDefaultLocale=u,exports.useGT=P,exports.useLocale=c;
//# sourceMappingURL=index.cjs.min.cjs.map
