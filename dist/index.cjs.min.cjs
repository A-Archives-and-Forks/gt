"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){return t=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},t.apply(this,arguments)};function n(t,n,e,r){return new(e||(e=Promise))((function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(i,u)}c((r=r.apply(t,n||[])).next())}))}function e(t,n){var e,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(e)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(e=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=n.call(t,a)}catch(t){u=[6,t],r=0}finally{e=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}"function"==typeof SuppressedError&&SuppressedError;var r="/translate/v1/batch",o="/translate/v1/react",a="/translate/v1/content",i="/dictionaries/v1/update";function u(t,o){return n(this,void 0,void 0,(function(){var n,a,i,u,c,s,l,f,p;return e(this,(function(e){switch(e.label){case 0:return n=new AbortController,a=n.signal,(null===(p=null===(f=null===(l=o[0])||void 0===l?void 0:l.data)||void 0===f?void 0:f.metadata)||void 0===p?void 0:p.timeout)&&setTimeout((function(){return n.abort()}),o[0].data.metadata.timeout),[4,fetch("".concat(t.baseURL).concat(r),{method:"POST",headers:{"Content-Type":"application/json","gtx-api-key":t.apiKey},body:JSON.stringify(o),signal:a})];case 1:return(i=e.sent()).ok?[3,3]:(u=Error.bind,s=(c="".concat(i.status,": ")).concat,[4,i.text()]);case 2:throw new(u.apply(Error,[void 0,s.apply(c,[e.sent()])]));case 3:return[4,i.json()];case 4:return[2,e.sent()]}}))}))}var c="en",s=function(t){try{return new Intl.Locale(t).toString()}catch(t){return""}};function l(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{var e=t.flat().map((function(t){return new Intl.Locale(t).language}));return e.every((function(t){return t===e[0]}))}catch(t){return console.error(t),!1}}function f(t,r,o,i){return n(this,void 0,void 0,(function(){var n,u,c,s,l,f;return e(this,(function(e){switch(e.label){case 0:return n=new AbortController,u=n.signal,i.timeout&&setTimeout((function(){return n.abort()}),i.timeout),[4,fetch("".concat(t.baseURL).concat(a),{method:"POST",headers:{"Content-Type":"application/json","gtx-api-key":t.apiKey},body:JSON.stringify({content:r,targetLanguage:o,metadata:i}),signal:u})];case 1:return(c=e.sent()).ok?[3,3]:(s=Error.bind,f=(l="".concat(c.status,": ")).concat,[4,c.text()]);case 2:throw new(s.apply(Error,[void 0,f.apply(l,[e.sent()])]));case 3:return[4,c.json()];case 4:return[2,e.sent()]}}))}))}function p(t,r,a,i){return n(this,void 0,void 0,(function(){var n,u,c,s,l,f;return e(this,(function(e){switch(e.label){case 0:return n=new AbortController,u=n.signal,i.timeout&&setTimeout((function(){return n.abort()}),i.timeout),[4,fetch("".concat(t.baseURL).concat(o),{method:"POST",headers:{"Content-Type":"application/json","gtx-api-key":t.apiKey},body:JSON.stringify({children:r,targetLanguage:a,metadata:i}),signal:u})];case 1:return(c=e.sent()).ok?[3,3]:(s=Error.bind,f=(l="".concat(c.status,": ")).concat,[4,c.text()]);case 2:throw new(s.apply(Error,[void 0,f.apply(l,[e.sent()])]));case 3:return[4,c.json()];case 4:return[2,e.sent()]}}))}))}function v(t,r,o,a){return n(this,void 0,void 0,(function(){var n,u,c,s,l;return e(this,(function(e){switch(e.label){case 0:return[4,fetch("".concat(t.baseURL).concat(i),{method:"POST",headers:{"Content-Type":"application/json","gtx-api-key":t.apiKey},body:JSON.stringify({updates:r,languages:o,options:a})})];case 1:return(n=e.sent()).ok?[3,3]:(u=Error.bind,s=(c="".concat(n.status,": ")).concat,[4,n.text()]);case 2:throw new(u.apply(Error,[void 0,s.apply(c,[e.sent()])]));case 3:return[4,n.json()];case 4:return[2,null==(l=e.sent())?void 0:l.languages]}}))}))}function d(n){var e=n.value,r=n.languages,o=void 0===r?[c]:r,a=n.options,i=void 0===a?{}:a;return new Intl.NumberFormat(o,t({numberingSystem:"latn"},i)).format(e)}function g(n){var e=n.value,r=n.languages,o=void 0===r?[c]:r,a=n.options,i=void 0===a?{}:a;return new Intl.DateTimeFormat(o,t({calendar:"gregory",numberingSystem:"latn"},i)).format(e)}function y(n){var e=n.value,r=n.languages,o=void 0===r?[c]:r,a=n.currency,i=void 0===a?"USD":a,u=n.options,s=void 0===u?{}:u;return new Intl.NumberFormat(o,t({style:"currency",currency:i,numberingSystem:"latn"},s)).format(e)}function h(n){var e=n.value,r=n.languages,o=void 0===r?[c]:r,a=n.options,i=void 0===a?{}:a;return new Intl.ListFormat(o,t({type:"conjunction",style:"long"},i)).format(e)}var m={var:"variable",num:"number",datetime:"datetime",currency:"currency"};function b(n){if("string"!=typeof n)throw new Error("splitStringToContent: ".concat(n," is not a string!"));for(var e,r=[],o=/{([^}]+)}/g,a=0;null!==(e=o.exec(n));){var i=e[0],u=e[1],c=e.index;if("^"!==n[c-1]){c>a&&r.push(n.slice(a,c));var s=u.split(",").map((function(t){return t.trim()})),l=s[0],f=s[1]?m[s[1]]:void 0,p=t({key:l},f&&{variable:f});r.push(p),a=c+i.length}else c-1>a&&r.push(n.slice(a,c-1)),r.push(i),a=c+i.length}return a<n.length&&r.push(n.slice(a)),r}var w=function(t){return"undefined"!=typeof process&&process.env&&process.env[t]||""},x=function(){function r(t){var n=void 0===t?{}:t,e=n.apiKey,r=void 0===e?"":e,o=n.defaultLanguage,a=void 0===o?c:o,i=n.projectID,u=void 0===i?"":i,s=n.baseURL,l=void 0===s?"https://prod.gtx.dev":s;this.apiKey=r||w("GT_API_KEY"),this.projectID=u||w("GT_PROJECT_ID"),this.defaultLanguage=a.toLowerCase(),this.baseURL=l}return r.prototype.translate=function(r,o,a){return n(this,void 0,void 0,(function(){return e(this,(function(n){switch(n.label){case 0:return[4,f(this,r,o,t({defaultLanguage:this.defaultLanguage},a))];case 1:return[2,n.sent()]}}))}))},r.prototype.translateReact=function(r,o,a){return n(this,void 0,void 0,(function(){return e(this,(function(n){switch(n.label){case 0:return[4,p(this,r,o,t({defaultLanguage:this.defaultLanguage},a))];case 1:return[2,n.sent()]}}))}))},r.prototype.translateBatch=function(t){return n(this,void 0,void 0,(function(){return e(this,(function(n){return[2,u(this,t)]}))}))},r.prototype.updateDictionary=function(t){return n(this,arguments,void 0,(function(t,n,r){return void 0===n&&(n=[]),void 0===r&&(r={}),e(this,(function(e){return[2,v(this,t,n,r)]}))}))},r}();exports.default=x,exports.determineLanguage=function(t,n){return function(t,n){if("string"==typeof t&&(t=[t]),!n)return t[0];for(var e=function(t){var e=n.find((function(n){return n===t}));if(e)return{value:e};var r=n.find((function(n){return l(n,t)}));return r?{value:r}:void 0},r=0,o=t;r<o.length;r++){var a=e(o[r]);if("object"==typeof a)return a.value}}(t,n)},exports.formatCurrency=function(t){return y(t)},exports.formatDateTime=function(t){return g(t)},exports.formatList=function(t){return h(t)},exports.formatNum=function(t){return d(t)},exports.formatRelativeTime=function(n){return r=(e=n).value,o=e.unit,a=e.languages,i=void 0===a?[c]:a,u=e.options,s=void 0===u?{}:u,new Intl.RelativeTimeFormat(i,t({style:"long",numeric:"auto"},s)).format(r,o);var e,r,o,a,i,u,s},exports.getLanguageDirection=function(t){return function(t){var n;try{var e=new Intl.Locale(t);return"rtl"===(null===(n=null==e?void 0:e.textInfo)||void 0===n?void 0:n.direction)?"rtl":"ltr"}catch(t){return"ltr"}}(t)},exports.getLanguageName=function(t,n){return function(t,n){void 0===n&&(n=c);try{var e=new Intl.DisplayNames([n],{type:"language"});return"string"==typeof t?e.of(t)||"":Array.isArray(t)?t.map((function(t){return e.of(t)||""})):""}catch(n){return"string"==typeof t?"":Array.isArray(t)?t.map((function(){return""})):""}}(t,n)},exports.isSameLanguage=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return l.apply(void 0,t)},exports.isValidLanguageCode=function(t){return function(t){try{var n=new Intl.Locale(t),e=n.language,r=n.region,o=n.script;return new Intl.DisplayNames([c],{type:"language"}).of(e)!==e&&((!r||new Intl.DisplayNames([c],{type:"region"}).of(r)!==r)&&(!o||new Intl.DisplayNames([c],{type:"script"}).of(o)!==o))}catch(t){return!1}}(t)},exports.renderContentToString=function(n,e,r,o){return function(n,e,r,o){if(void 0===e&&(e=c),void 0===r&&(r={}),void 0===o&&(o={}),"string"==typeof n&&(n=b(n)),"string"==typeof n)return n;if(!Array.isArray(n))throw new Error("renderContentToString: content ".concat(n," is invalid"));return n.map((function(n){var a;if("string"==typeof n)return n;if("object"==typeof n){var i=r[n.key];return n.variable?"number"===n.variable?d({value:i,languages:e,options:o[n.key]}):"currency"===n.variable?y(t(t({value:i,languages:e},o[n.key]&&{options:o[n.key]}),(null===(a=o[n.key])||void 0===a?void 0:a.currency)&&{currency:o[n.key].currency})):"datetime"===n.variable?g(t({value:i,languages:e},o[n.key]&&{options:o[n.key]})):"list"===n.variable?h(t({value:i,languages:e},o[n.key]&&{options:o[n.key]})):i:i}})).join("")}(n,e,r,o)},exports.requiresTranslation=function(t,n,e){return function(t,n,e){if(!n)return!1;if(s(n)===s(t))return!1;var r=new Intl.Locale(t),o=r.language,a=r.region,i=new Intl.Locale(n),u=i.language,c=i.region;return!(!(a&&c||!l(o,u))||e&&!e.some((function(t){return l(n,t)})))}(t,n,e)},exports.splitStringToContent=function(t){return b(t)},exports.standardizeLanguageCode=function(t){return s(t)};
//# sourceMappingURL=index.cjs.min.cjs.map
