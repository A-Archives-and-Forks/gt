"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){return t=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},t.apply(this,arguments)};function e(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,u)}c((r=r.apply(t,e||[])).next())}))}function n(t,e){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}function r(t,r){return e(this,void 0,void 0,(function(){var e,o,a,i,u,c,s,l,f;return n(this,(function(n){switch(n.label){case 0:return e=new AbortController,o=e.signal,(null===(f=null===(l=null===(s=r[0])||void 0===s?void 0:s.data)||void 0===l?void 0:l.metadata)||void 0===f?void 0:f.timeout)&&setTimeout((function(){return e.abort()}),r[0].data.metadata.timeout),[4,fetch("".concat(t.baseURL,"/bundle"),{method:"POST",headers:{"Content-Type":"application/json","gtx-api-key":t.apiKey},body:JSON.stringify(r),signal:o})];case 1:return(a=n.sent()).ok?[3,3]:(i=Error.bind,c=(u="".concat(a.status,": ")).concat,[4,a.text()]);case 2:throw new(i.apply(Error,[void 0,c.apply(u,[n.sent()])]));case 3:return[4,a.json()];case 4:return[2,n.sent()]}}))}))}"function"==typeof SuppressedError&&SuppressedError;var o="en",a=function(t){try{return new Intl.Locale(t).toString()}catch(t){return""}};function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{var n=t.flat().map((function(t){return new Intl.Locale(t).language}));return n.every((function(t){return t===n[0]}))}catch(t){return console.error(t),!1}}function u(t,r,o,a){return e(this,void 0,void 0,(function(){var e,i,u,c,s,l;return n(this,(function(n){switch(n.label){case 0:return e=new AbortController,i=e.signal,a.timeout&&setTimeout((function(){return e.abort()}),a.timeout),[4,fetch("".concat(t.baseURL,"/translate"),{method:"POST",headers:{"Content-Type":"application/json","gtx-api-key":t.apiKey},body:JSON.stringify({content:r,targetLanguage:o,metadata:a}),signal:i})];case 1:return(u=n.sent()).ok?[3,3]:(c=Error.bind,l=(s="".concat(u.status,": ")).concat,[4,u.text()]);case 2:throw new(c.apply(Error,[void 0,l.apply(s,[n.sent()])]));case 3:return[4,u.json()];case 4:return[2,n.sent()]}}))}))}function c(t,r,o,a){return e(this,void 0,void 0,(function(){var e,i,u,c,s,l;return n(this,(function(n){switch(n.label){case 0:return e=new AbortController,i=e.signal,a.timeout&&setTimeout((function(){return e.abort()}),a.timeout),[4,fetch("".concat(t.baseURL,"/react"),{method:"POST",headers:{"Content-Type":"application/json","gtx-api-key":t.apiKey},body:JSON.stringify({children:r,targetLanguage:o,metadata:a}),signal:i})];case 1:return(u=n.sent()).ok?[3,3]:(c=Error.bind,l=(s="".concat(u.status,": ")).concat,[4,u.text()]);case 2:throw new(c.apply(Error,[void 0,l.apply(s,[n.sent()])]));case 3:return[4,u.json()];case 4:return[2,n.sent()]}}))}))}function s(t,r,o,a){return e(this,void 0,void 0,(function(){var e,i,u,c,s;return n(this,(function(n){switch(n.label){case 0:return[4,fetch("".concat(t.baseURL,"/update"),{method:"POST",headers:{"Content-Type":"application/json","gtx-api-key":t.apiKey},body:JSON.stringify({updates:r,languages:o,replace:a})})];case 1:return(e=n.sent()).ok?[3,3]:(i=Error.bind,c=(u="".concat(e.status,": ")).concat,[4,e.text()]);case 2:throw new(i.apply(Error,[void 0,c.apply(u,[n.sent()])]));case 3:return[4,e.json()];case 4:return[2,null==(s=n.sent())?void 0:s.languages]}}))}))}function l(e){var n=e.value,r=e.languages,a=void 0===r?[o]:r,i=e.options,u=void 0===i?{}:i;return new Intl.NumberFormat(a,t({numberingSystem:"latn"},u)).format(n)}function f(e){var n=e.value,r=e.languages,a=void 0===r?[o]:r,i=e.options,u=void 0===i?{}:i;return new Intl.DateTimeFormat(a,t({calendar:"gregory",numberingSystem:"latn"},u)).format(n)}function p(e){var n=e.value,r=e.languages,a=void 0===r?[o]:r,i=e.currency,u=void 0===i?"USD":i,c=e.options,s=void 0===c?{}:c;return new Intl.NumberFormat(a,t({style:"currency",currency:u,numberingSystem:"latn"},s)).format(n)}function v(e){var n=e.value,r=e.languages,a=void 0===r?[o]:r,i=e.options,u=void 0===i?{}:i;return new Intl.ListFormat(a,t({type:"conjunction",style:"long"},u)).format(n)}var d={var:"variable",num:"number",datetime:"datetime",currency:"currency"};function y(e){if("string"!=typeof e)throw new Error("splitStringToContent: ".concat(e," is not a string!"));for(var n,r=[],o=/{([^}]+)}/g,a=0;null!==(n=o.exec(e));){var i=n[0],u=n[1],c=n.index;if("^"!==e[c-1]){c>a&&r.push(e.slice(a,c));var s=u.split(",").map((function(t){return t.trim()})),l=s[0],f=s[1]?d[s[1]]:void 0,p=t({key:l},f&&{variable:f});r.push(p),a=c+i.length}else c-1>a&&r.push(e.slice(a,c-1)),r.push(i),a=c+i.length}return a<e.length&&r.push(e.slice(a)),r}var g=function(t){return"undefined"!=typeof process&&process.env&&process.env[t]||""},h=function(){function a(t){var e=void 0===t?{}:t,n=e.apiKey,r=void 0===n?"":n,a=e.defaultLanguage,i=void 0===a?o:a,u=e.projectID,c=void 0===u?"":u,s=e.baseURL,l=void 0===s?"https://prod.gtx.dev":s;this.apiKey=r||g("GT_API_KEY"),this.projectID=c||g("GT_PROJECT_ID"),this.defaultLanguage=i.toLowerCase(),this.baseURL=l}return a.prototype.translate=function(r,o,a){return e(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,u(this,r,o,t({projectID:this.projectID,defaultLanguage:this.defaultLanguage},a))];case 1:return[2,e.sent()]}}))}))},a.prototype.translateReact=function(r,o,a){return e(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,c(this,r,o,t({projectID:this.projectID,defaultLanguage:this.defaultLanguage},a))];case 1:return[2,e.sent()]}}))}))},a.prototype.translateBundle=function(t){return e(this,void 0,void 0,(function(){return n(this,(function(e){return[2,r(this,t)]}))}))},a.prototype.updateProjectDictionary=function(t){return e(this,arguments,void 0,(function(t,e,r){return void 0===e&&(e=[]),void 0===r&&(r=!1),n(this,(function(n){return[2,s(this,t,e,r)]}))}))},a}();exports.default=h,exports.determineLanguage=function(t,e){return function(t,e){if("string"==typeof t&&(t=[t]),!e)return t[0];for(var n=function(t){var n=e.find((function(e){return e===t}));if(n)return{value:n};var r=e.find((function(e){return i(e,t)}));return r?{value:r}:void 0},r=0,o=t;r<o.length;r++){var a=n(o[r]);if("object"==typeof a)return a.value}}(t,e)},exports.formatCurrency=function(t){return p(t)},exports.formatDateTime=function(t){return f(t)},exports.formatList=function(t){return v(t)},exports.formatNum=function(t){return l(t)},exports.formatRelativeTime=function(e){return r=(n=e).value,a=n.unit,i=n.languages,u=void 0===i?[o]:i,c=n.options,s=void 0===c?{}:c,new Intl.RelativeTimeFormat(u,t({style:"long",numeric:"auto"},s)).format(r,a);var n,r,a,i,u,c,s},exports.getLanguageDirection=function(t){return function(t){var e;try{var n=new Intl.Locale(t);return"rtl"===(null===(e=null==n?void 0:n.textInfo)||void 0===e?void 0:e.direction)?"rtl":"ltr"}catch(t){return"ltr"}}(t)},exports.getLanguageName=function(t,e){return function(t,e){void 0===e&&(e=o);try{var n=new Intl.DisplayNames([e],{type:"language"});return"string"==typeof t?n.of(t)||"":Array.isArray(t)?t.map((function(t){return n.of(t)||""})):""}catch(e){return"string"==typeof t?"":Array.isArray(t)?t.map((function(){return""})):""}}(t,e)},exports.isSameLanguage=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.apply(void 0,t)},exports.isValidLanguageCode=function(t){return function(t){try{var e=new Intl.Locale(t),n=e.language,r=e.region,a=e.script;return new Intl.DisplayNames([o],{type:"language"}).of(n)!==n&&((!r||new Intl.DisplayNames([o],{type:"region"}).of(r)!==r)&&(!a||new Intl.DisplayNames([o],{type:"script"}).of(a)!==a))}catch(t){return!1}}(t)},exports.renderContentToString=function(e,n,r,a){return function(e,n,r,a){if(void 0===n&&(n=o),void 0===r&&(r={}),void 0===a&&(a={}),"string"==typeof e&&(e=y(e)),"string"==typeof e)return e;if(!Array.isArray(e))throw new Error("renderContentToString: content ".concat(e," is invalid"));return e.map((function(e){var o;if("string"==typeof e)return e;if("object"==typeof e){var i=r[e.key];return e.variable?"number"===e.variable?l({value:i,languages:n,options:a[e.key]}):"currency"===e.variable?p(t(t({value:i,languages:n},a[e.key]&&{options:a[e.key]}),(null===(o=a[e.key])||void 0===o?void 0:o.currency)&&{currency:a[e.key].currency})):"datetime"===e.variable?f(t({value:i,languages:n},a[e.key]&&{options:a[e.key]})):"list"===e.variable?v(t({value:i,languages:n},a[e.key]&&{options:a[e.key]})):i:i}})).join("")}(e,n,r,a)},exports.requiresTranslation=function(t,e,n){return function(t,e,n){return!(!e||a(e)===a(t)||n&&!n.some((function(t){return i(e,t)})))}(t,e,n)},exports.splitStringToContent=function(t){return y(t)},exports.standardizeLanguageCode=function(t){return a(t)};
//# sourceMappingURL=index.cjs.min.cjs.map
