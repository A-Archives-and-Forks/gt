!function(e,a){"object"==typeof exports&&"undefined"!=typeof module?a(exports,require("react/jsx-runtime"),require("react"),require("generaltranslation"),require("xxhashjs")):"function"==typeof define&&define.amd?define(["exports","react/jsx-runtime","react","generaltranslation","xxhashjs"],a):a((e="undefined"!=typeof globalThis?globalThis:e||self).gtReact={},e.React,e.React,e.generaltranslation)}(this,(function(e,a,r,n){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=t(r),o=function(){return o=Object.assign||function(e){for(var a,r=1,n=arguments.length;r<n;r++)for(var t in a=arguments[r])Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e},o.apply(this,arguments)};function l(e,a){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var t=0;for(n=Object.getOwnPropertySymbols(e);t<n.length;t++)a.indexOf(n[t])<0&&Object.prototype.propertyIsEnumerable.call(e,n[t])&&(r[n[t]]=e[n[t]])}return r}function u(e,a,r,n){return new(r||(r=Promise))((function(t,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function l(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var a;e.done?t(e.value):(a=e.value,a instanceof r?a:new r((function(e){e(a)}))).then(o,l)}u((n=n.apply(e,a||[])).next())}))}function s(e,a){var r,n,t,i={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(u){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(r=1,n&&(t=2&l[0]?n.return:l[0]?n.throw||((t=n.return)&&t.call(n),0):n.next)&&!(t=t.call(n,l[1])).done)return t;switch(n=0,t&&(l=[2&l[0],t.value]),l[0]){case 0:case 1:t=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(t=i.trys,(t=t.length>0&&t[t.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!t||l[1]>t[0]&&l[1]<t[3])){i.label=l[1];break}if(6===l[0]&&i.label<t[1]){i.label=t[1],t=l;break}if(t&&i.label<t[2]){i.label=t[2],i.ops.push(l);break}t[2]&&i.ops.pop(),i.trys.pop();continue}l=a.call(e,i)}catch(e){l=[6,e],n=0}finally{r=t=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}}"function"==typeof SuppressedError&&SuppressedError;var c=r.createContext(void 0);function d(e){void 0===e&&(e="useGTContext() must be used within a <GTProvider>!");var a=r.useContext(c);if(void 0===a)throw new Error(e);return a}function v(){return d("useDefaultLocale(): Unable to access default locale outside of a <GTProvider>").defaultLocale}function f(){return d("useLocale(): Unable to access user's locale outside of a <GTProvider>").locale}function p(e){return e&&e.props&&e.props["data-generaltranslation"]?e.props["data-generaltranslation"]:null}var b={variable:"value",number:"n",datetime:"date",currency:"cost"};function h(e){var a,r=(null===(a=e["data-generaltranslation"])||void 0===a?void 0:a.variableType)||"variable";return{variableType:r,variableName:e.name||e["data-gt-variable-name"]||b[r],variableValue:void 0!==e.value?e.value:void 0!==e["data-gt-unformatted-value"]?e["data-gt-unformatted-value"]:void 0!==e.children?e.children:void 0,variableOptions:e.options||e["data-gt-variable-options"]||void 0}}function g(e){var r=void 0===e?{name:"n"}:e,t=r.children,i=r.name,o=void 0===i?"n":i,l=r.value,u=r.options,s=void 0===u?{}:u,c=[f(),v()],d=void 0!==t?t:l;return"number"==typeof(d="string"==typeof d?parseFloat(d):d)&&(d=n.formatNum({value:d,languages:c,options:s})),a.jsx("span",{"data-gt-variable-name":o,"data-gt-variable-type":"number","data-gt-variable-options":JSON.stringify(s),children:d})}function m(e){var r=e.children,n=e.name,t=e.value,i=void 0!==r?r:t;return a.jsx("span",{"data-gt-variable-name":n,"data-gt-variable-type":"variable",children:i})}function y(e){var r=void 0===e?{name:"cost"}:e,t=r.children,i=r.name,l=void 0===i?"cost":i,u=r.value,s=r.currency,c=void 0===s?"USD":s,d=r.options,p=void 0===d?{}:d,b=[f(),v()],h=void 0!==t&&void 0===u?t:u;return"number"==typeof(h="string"==typeof h?parseFloat(h):h)&&(h=n.formatCurrency({value:h,languages:b,currency:c,options:p})),a.jsx("span",{"data-gt-variable-name":l,"data-gt-variable-type":"currency","data-gt-variable-options":o({style:"currency",currency:c},p),children:h})}function w(e){var r,t,i=void 0===e?{name:"date"}:e,o=i.children,l=i.name,u=void 0===l?"date":l,s=i.value,c=i.options,d=void 0===c?{}:c,p=[f(),v()],b=void 0!==o&&void 0===s?o:s;return"number"==typeof b||"string"==typeof b?t=new Date(b):b instanceof Date&&(t=b),void 0!==t&&(r=n.formatDateTime({value:t,languages:p,options:d}).replace(/[\u200F\u202B\u202E]/g,"")),a.jsx("span",{"data-gt-variable-name":u,"data-gt-variable-type":"date","data-gt-variable-options":d,children:r})}function O(e){if(e&&"object"==typeof e&&"string"==typeof e.key){var a=Object.keys(e);if(1===a.length)return!0;if(2===a.length){var r=e;return"string"==typeof r.variable&&["variable","number","date","currency"].includes(r.variable)}}return!1}g.gtTransformation="variable-number",m.gtTransformation="variable-variable",y.gtTransformation="variable-currency",w.gtTransformation="variable-datetime";var j="generaltranslation-locale",x="en",T=["singular","plural","dual","zero","one","two","few","many","other"];var E={};function k(e,a,n){void 0===n&&(n=0);var t=n,u=function(e){var a=e.type,r=e.props,n={id:t+=1},i="function"==typeof a&&a.gtTransformation||"";if(i){var o=i.split("-");if("variable"===o[0]&&(n.variableType=(null==o?void 0:o[1])||"variable"),"plural"===o[0]){var u=Object.entries(r).reduce((function(e,a){var r,n=a[0],i=a[1];return r=n,T.includes(r)&&(e[n]=k(i,n,t)),e}),{});Object.keys(u).length&&(n.branches=u)}if("branch"===o[0]){r.children,r.branch;var s=l(r,["children","branch"]),c=Object.entries(s).reduce((function(e,a){var r=a[0],n=a[1];return e[r]=k(n,r,t),e}),{});Object.keys(c).length&&(n.branches=c)}n.transformation=o[0]}return n};function s(e){if(r.isValidElement(e)){var n=e.props,t=u(e),l=o(o({},n),{"data-generaltranslation":t});return a&&(l.key=a,a=void 0),n.children&&(l.children=c(n.children)),i.default.cloneElement(e,l)}return e}function c(e){return Array.isArray(e)?(a=void 0,i.default.Children.map(e,s)):s(e)}return c(e)}function P(e,a,r){var n="",t=null;return"number"==typeof e&&!t&&r&&(n=function(e,a,r){var n=new Intl.PluralRules(a).select(e),t=Math.abs(e);if(0===t&&r.zero)return"zero";if(1===t){if(r.singular)return"singular";if(r.one)return"one"}if("one"===n&&r.singular)return"singular";if(2===t){if(r.dual)return"dual";if(r.two)return"two"}return"two"===n&&r.dual?"dual":r[n]?n:"two"===n&&r.dual?"dual":"two"===n&&r.plural?"plural":"two"===n&&r.other?"other":"few"===n&&r.plural?"plural":"few"===n&&r.other?"other":"many"===n&&r.plural?"plural":"many"===n&&r.other?"other":"other"===n&&r.plural?"plural":""}(e,a,r)),n&&!t&&(t=r[n]),t}function L(e){var r=e.variableType,n=e.variableName,t=e.variableValue,i=e.variableOptions;return"number"===r?a.jsx(g,{name:n,value:t,options:i}):"datetime"===r?a.jsx(w,{name:n,value:t,options:i}):"currency"===r?a.jsx(y,{name:n,value:t,options:i}):a.jsx(m,{name:n,value:t})}function A(e){var a,r=e.sourceElement,n=e.targetElement,t=e.variables,l=void 0===t?{}:t,u=e.variablesOptions,s=void 0===u?{}:u,c=e.locales,d=void 0===c?[x]:c,v=r.props,f=v["data-generaltranslation"],p=null==f?void 0:f.transformation;if("plural"===p){var b="number"==typeof l.n?l.n:"number"==typeof r.props.n?r.props.n:r.props["data-gt-n"],h=P(b,d,f.branches||{})||r.props.children,g=P(b,d,n.props["data-generaltranslation"].branches||{})||n.props.children;return i.default.createElement("span",o(o({},v),{"data-generaltranslation":void 0,children:S({source:h,target:g,variables:l,variablesOptions:s,locales:d})}))}if("branch"===p){var m=v.name,y=v.branch,w=v.children;y=l[m=m||r.props["data-gt-name"]||"branch"]||y||r.props["data-gt-branch-name"];h=(f.branches||{})[y]||w,g=(n.props["data-generaltranslation"].branches||{})[y]||n.props.children;return i.default.createElement("span",o(o({},v),{"data-generaltranslation":void 0,children:S({source:h,target:g,variables:l,variablesOptions:s,locales:d})}))}return(null==v?void 0:v.children)&&(null===(a=n.props)||void 0===a?void 0:a.children)?i.default.cloneElement(r,o(o({},v),{"data-generaltranslation":void 0,children:S({source:v.children,target:n.props.children,variables:l,variablesOptions:s,locales:d})})):r}function S(e){var r=e.source,n=e.target,t=e.variables,l=void 0===t?{}:t,u=e.variablesOptions,s=void 0===u?{}:u,c=e.locales,d=void 0===c?[x]:c;if(null==n&&r)return r;if("string"==typeof n)return n;if(Array.isArray(r)&&Array.isArray(n)){var v=r.filter((function(e){if(i.default.isValidElement(e)){var a=p(e);if(h(e.props),"variable"!==(null==a?void 0:a.transformation))return!0;var r=h(e.props),n=r.variableName,t=r.variableValue,u=r.variableOptions;void 0===l[n]&&(l[n]=t),s[n]=o(o({},s[n]),u)}}));return n.map((function(e,r){if("string"==typeof e)return a.jsx(i.default.Fragment,{children:e},"string_".concat(r));if(O(e))return a.jsx(i.default.Fragment,{children:L({variableType:e.variable||"variable",variableName:e.key,variableValue:l[e.key],variableOptions:s[e.key]})},"var_".concat(r));var n,t=(n=e,v.find((function(e){var a,r,t=p(e);return void 0!==(null==t?void 0:t.id)&&t.id===(null===(r=null===(a=null==n?void 0:n.props)||void 0===a?void 0:a["data-generaltranslation"])||void 0===r?void 0:r.id)})));return t?a.jsx(i.default.Fragment,{children:A({sourceElement:t,targetElement:e,variables:l,variablesOptions:s,locales:d})},"element_".concat(r)):void 0}))}if(n&&"object"==typeof n&&!Array.isArray(n)){var f=O(n)?"variable":"element";if(i.default.isValidElement(r)){if("element"===f)return A({sourceElement:r,targetElement:n,variables:l,variablesOptions:s,locales:d});var b=p(r);if("variable"===(null==b?void 0:b.transformation)){var g=h(r.props),m=g.variableName,y=g.variableValue,w=g.variableOptions;void 0===l[m]&&(l[m]=y),s[m]=o(o({},s[m]),w)}}if("variable"===f){var j=n;return L({variableType:j.variable||"variable",variableName:j.key,variableValue:l[j.key],variableOptions:s[j.key]})}}}function V(e){var a=e.children,r=e.variables,n=void 0===r?{}:r,t=e.variablesOptions,u=void 0===t?{}:t,s=e.defaultLocale,c=void 0===s?x:s,d=function(e){if(i.default.isValidElement(e)){var a=p(e);if("variable"===(null==a?void 0:a.transformation)){var r=h(e.props),t=r.variableName,s=r.variableType,d=r.variableValue,f=r.variableOptions;return L({variableName:t,variableType:s,variableValue:d=void 0!==n[t]?n[t]:d,variableOptions:o(o({},u[t]),f)})}if("plural"===(null==a?void 0:a.transformation)){var b="number"==typeof n.n?n.n:"number"==typeof e.props.n?e.props.n:e.props["data-gt-n"],g=a.branches||{};return i.default.createElement("span",o(o({},e.props),{"data-generaltranslation":void 0,children:v(P(b,[c],g)||e.props.children)}))}if("branch"===(null==a?void 0:a.transformation)){var m=e.props;m.children;var y=m.name,w=m.branch;g=l(m,["children","name","branch"]);return y=y||e.props["data-gt-name"]||"branch",w=n[y]||w||e.props["data-gt-branch-name"],g=a.branches||{},i.default.createElement("span",o(o({},e.props),{"data-generaltranslation":void 0,children:v(g[w])}))}if(e.props.children)return i.default.cloneElement(e,o(o({},e.props),{"data-generaltranslation":void 0,children:v(e.props.children)}))}return e},v=function(e){return Array.isArray(e)?i.default.Children.map(e,d):d(e)};return v(a)}function C(e){void 0===e&&(e="");var a=function(a){return e?"".concat(e,".").concat(a):a},r=d("useGT('".concat(e,"'): No context provided. You're trying to get the t() function on the client, which can only be done inside a <GTProvider>.")).translate;return function(e,n,t){void 0===e&&(e=""),void 0===n&&(n={});var i=a(e),o=r?r(i,n,t):void 0;return o||console.warn("t('".concat(e,"') finding no translation for dictionary item ").concat(i," !")),o}}function N(e,a){void 0===e&&(e=x),void 0===a&&(a=j);var n=r.useState(""),t=n[0],i=n[1];return r.useEffect((function(){var r=(a?function(e){void 0===e&&(e=j);for(var a=0,r=document.cookie.split("; ");a<r.length;a++){var n=r[a].split("="),t=n[0],i=n[1];if(t===e)return decodeURIComponent(i)}return null}(a):void 0)||navigator.language||(null===navigator||void 0===navigator?void 0:navigator.userLanguage)||e;i(r)}),[e]),t}function G(e){var r=e.children,n=e.n,t=l(e,["children","n"]),i=t["data-generaltranslation"],o=l(t,["data-generaltranslation"]),u=f(),s=v();if("number"!=typeof n)throw new Error('Plural with children "'.concat(r,'" requires "n" option.'));var c=P(n,[u,s],o)||r;return a.jsx("span",{"data-generaltranslation":i,"data-gt-n":n,children:c})}function D(e){var r=e.children,n=e.name,t=void 0===n?"branch":n,i=e.branch,o=l(e,["children","name","branch"]),u=o["data-generaltranslation"],s=l(o,["data-generaltranslation"]),c=i&&void 0!==s[i]?s[i]:r;return a.jsx("span",{"data-generaltranslation":u,"data-gt-name":t||"branch","data-gt-branch-name":i,children:c})}G.gtTransformation="plural",D.gtTransformation="branch",e.Branch=D,e.Currency=y,e.DateTime=w,e.GTProvider=function(e){var t=this,o=e.children,l=e.projectID,d=e.dictionary,v=void 0===d?E:d,f=e.dictionaryName,p=void 0===f?"default":f,b=e.locales,h=e.defaultLocale,g=void 0===h?(null==b?void 0:b[0])||x:h,m=e.locale,y=e.cacheURL,w=void 0===y?"https://cache.gtx.dev":y;if(!l&&"https://cache.gtx.dev"===w)throw new Error("gt-react Error: General Translation cloud services require a project ID! Find yours at www.generaltranslation.com/dashboard.");var O=N(g);m=m||O,b&&(m=n.determineLanguage([m,O],b)||m);var j=!m||!n.isSameLanguage(m,g),T=r.useState(w?null:{}),P=T[0],L=T[1];r.useEffect((function(){P||(j?u(t,void 0,void 0,(function(){var e;return s(this,(function(a){switch(a.label){case 0:return[4,fetch("".concat(w,"/").concat(l,"/").concat(m,"/").concat(p))];case 1:return[4,a.sent().json()];case 2:return e=a.sent(),L(e),[2]}}))})):L({}))}),[P,j]);var A=r.useCallback((function(e,a,r){void 0===a&&(a={});var t=function(e){if(Array.isArray(e)){if(1===e.length)return{entry:e[0]};if(2===e.length)return{entry:e[0],metadata:e[1]}}return{entry:e}}(function(e,a){if(!a||"string"!=typeof a)throw new Error('Invalid dictionary id: "'.concat(a,'"'));for(var r=e,n=0,t=a.split(".");n<t.length;n++){var o=t[n];if("object"!=typeof r||Array.isArray(r)||i.default.isValidElement(r))throw new Error('Invalid dictionary id: "'.concat(a,'"'));r=r[o]}return r}(v,e)),o=t.entry,l=t.metadata;if(null!=o){var u,s;a&&(u=a,(null==l?void 0:l.variablesOptions)&&(s=l.variablesOptions)),"function"==typeof r?o=r(a):"function"==typeof o&&(o=o(a));var c=k(o,e);if(!j)return"string"==typeof c?n.renderContentToString(c,g,u,s):V({children:c,variables:u,variablesOptions:s,defaultLocale:g});if(P){var d=P[e];return"string"==typeof c?n.renderContentToString(d.t,[m,g],u,s):S({source:c,target:d.t,variables:u,variablesOptions:s,locales:[m,g]})}}else console.warn('Dictionary entry with id "'.concat(e,'" is null or undefined'))}),[v,P,j,g]);return a.jsx(c.Provider,{value:{translate:A,locale:m,defaultLocale:g,translations:P},children:P&&O?o:void 0})},e.Num=g,e.Plural=G,e.T=function(e){var t=e.children,u=e.id,s=l(e,["children","id"]);if(!u)throw new Error("Client-side <T> with no provided 'id' prop. Children: ".concat(t));var c=s.variables,p=s.variablesOptions,b=d('<T id="'.concat(u,'"> used on the client-side outside of <GTProvider>')).translations,h=C();if(!t)return a.jsx(i.default.Fragment,{children:h(u,o({variables:c},p&&{variablesOptions:p}))},u);var g=f(),m=v(),y=r.useMemo((function(){return k(t)}),[t]);if(!(!!g&&!n.isSameLanguage(g,m)))return V({children:y,variables:c,variablesOptions:p,defaultLocale:m});var w=b[u];if(!w||!w.t)throw new Error('<T id="'.concat(u,'"> is used in a client component without a corresponding translation.'));return S({source:y,target:w.t,variables:c,variablesOptions:p,locales:[g,m]})},e.Var=m,e.useDefaultLocale=v,e.useGT=C,e.useLocale=f,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.js.map
