import{hashString as r}from"generaltranslation/internal";import e,{isValidElement as a}from"react";var n={variable:"value",number:"n",datetime:"date",currency:"cost"},t=n,i=["singular","plural","dual","zero","one","two","few","many","other"];function o(r){return i.includes(r)}var l=Object.freeze({__proto__:null,defaultCacheURL:"https://cache.gtx.dev",defaultDictionary:{},defaultDictionaryName:"default",defaultVariableNames:t,isAcceptedPluralForm:o,libraryDefaultLocale:"en",localeCookieName:"generaltranslation-locale",pluralForms:i}),u=function(){return u=Object.assign||function(r){for(var e,a=1,n=arguments.length;a<n;a++)for(var t in e=arguments[a])Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r},u.apply(this,arguments)};function c(r,e){var a={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(a[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var t=0;for(n=Object.getOwnPropertySymbols(r);t<n.length;t++)e.indexOf(n[t])<0&&Object.prototype.propertyIsEnumerable.call(r,n[t])&&(a[n[t]]=r[n[t]])}return a}function f(e){var a=JSON.stringify(function(r){var e=function(r){var e;if(r&&"object"==typeof r&&r.props){if(null===(e=null==r?void 0:r.props)||void 0===e?void 0:e.children){r.type;var n=c(r,["type"]);return u(u({},n),{props:u(u({},r.props),{children:a(r.props.children)})})}return r.type,n=c(r,["type"])}return r},a=function(r){return Array.isArray(r)?r.map(e):e(r)};return a(r)}(e));return r(a)}function p(r,a){void 0===a&&(a="");var n={};for(var t in r)if(r.hasOwnProperty(t)){var i=a?"".concat(a,".").concat(t):t;if("object"!=typeof r[t]||null===r[t]||Array.isArray(r[t])||e.isValidElement(r[t])){if(n.hasOwnProperty(i))throw new Error("Duplicate key found in dictionary: ".concat(i));n[i]=r[t]}else{var o=p(r[t],i);for(var l in o){if(n.hasOwnProperty(l))throw new Error("Duplicate key found in dictionary: ".concat(l));n[l]=o[l]}}}return n}function s(r,n,t){void 0===t&&(t=0);var i=t;function l(r){if(a(r)){var t=r.props,l=function(r){var e=r.type,a=r.props,n={id:i+=1},t="function"==typeof e&&e.gtTransformation||"";if(t){var l=t.split("-");if("variable"===l[0]&&(n.variableType=(null==l?void 0:l[1])||"variable"),"plural"===l[0]){var u=Object.entries(a).reduce((function(r,e){var a=e[0],n=e[1];return o(a)&&(r[a]=s(n,a,i)),r}),{});Object.keys(u).length&&(n.branches=u)}if("branch"===l[0]){a.children,a.branch;var f=c(a,["children","branch"]),p=Object.entries(f).reduce((function(r,e){var a=e[0],n=e[1];return r[a]=s(n,a,i),r}),{});Object.keys(p).length&&(n.branches=p)}n.transformation=l[0]}return n}(r),p=u(u({},t),{"data-generaltranslation":l});return n&&(p.key=n,n=void 0),t.children&&(p.children=f(t.children)),e.cloneElement(r,p)}return r}function f(r){return Array.isArray(r)?(n=void 0,e.Children.map(r,l)):l(r)}return f(r)}"function"==typeof SuppressedError&&SuppressedError;var d=function(r){var e;if(!r)return"";var a=r.type,n=r.props;if(a&&"function"==typeof a){if("displayName"in a&&"string"==typeof a.displayName&&a.displayName)return a.displayName;if("name"in a&&"string"==typeof a.name&&a.name)return a.name}return a&&"string"==typeof a?a:n.href?"a":(null===(e=n["data-generaltranslation"])||void 0===e?void 0:e.id)?"C".concat(n["data-generaltranslation"].id):"function"},v=function(r){if(e.isValidElement(r)){var a=r;a.type;var t=a.props,i={type:d(r),props:{}};if(t["data-generaltranslation"]){var o=t["data-generaltranslation"],l=u({},o),c=o.transformation;if("variable"===c){var f=t.name||n[null==o?void 0:o.variableType]||"value";return{variable:o.variableType||"variable",key:f}}if("plural"===c&&o.branches){i.type="Plural";var p={};Object.entries(o.branches).forEach((function(r){var e=r[0],a=r[1];p[e]=y(a)})),l=u(u({},l),{branches:p})}if("branch"===c&&o.branches){i.type="Branch";var s={};Object.entries(o.branches).forEach((function(r){var e=r[0],a=r[1];s[e]=y(a)})),l=u(u({},l),{branches:s})}i.props["data-generaltranslation"]=l}return t.children&&(i.props.children=y(t.children)),i}return r};function y(r){return Array.isArray(r)?r.map(v):v(r)}function h(r,e,a){var n="",t=null;return"number"==typeof r&&!t&&a&&(n=function(r,e,a){var n=new Intl.PluralRules(e).select(r),t=Math.abs(r);if(0===t&&a.zero)return"zero";if(1===t){if(a.singular)return"singular";if(a.one)return"one"}if("one"===n&&a.singular)return"singular";if(2===t){if(a.dual)return"dual";if(a.two)return"two"}return"two"===n&&a.dual?"dual":a[n]?n:"two"===n&&a.dual?"dual":"two"===n&&a.plural?"plural":"two"===n&&a.other?"other":"few"===n&&a.plural?"plural":"few"===n&&a.other?"other":"many"===n&&a.plural?"plural":"many"===n&&a.other?"other":"other"===n&&a.plural?"plural":""}(r,e,a)),n&&!t&&(t=a[n]),t}function b(r,a){if(!a||"string"!=typeof a)throw new Error('Invalid dictionary id: "'.concat(a,'"'));for(var n=r,t=0,i=a.split(".");t<i.length;t++){var o=i[t];if("object"!=typeof n||Array.isArray(n)||e.isValidElement(n))throw new Error('Invalid dictionary id: "'.concat(a,'"'));n=n[o]}return n}function m(r){if(Array.isArray(r)){if(1===r.length)return{entry:r[0]};if(2===r.length)return{entry:r[0],metadata:r[1]}}return{entry:r}}function g(r){var e,a=(null===(e=r["data-generaltranslation"])||void 0===e?void 0:e.variableType)||"variable";return{variableType:a,variableName:r.name||r["data-_gt-variable-name"]||n[a],variableValue:void 0!==r.value?r.value:void 0!==r["data-_gt-unformatted-value"]?r["data-_gt-unformatted-value"]:void 0!==r.children?r.children:void 0,variableOptions:r.options||r["data-_gt-variable-options"]||void 0}}function w(r){if(r&&"object"==typeof r&&"string"==typeof r.key){var e=Object.keys(r);if(1===e.length)return!0;if(2===e.length){var a=r;return"string"==typeof a.variable&&["variable","number","date","currency"].includes(a.variable)}}return!1}export{s as addGTIdentifier,m as extractEntryMetadata,p as flattenDictionary,b as getDictionaryEntry,h as getPluralBranch,g as getVariableProps,f as hashReactChildrenObjects,w as isVariableObject,l as primitives,y as writeChildrenAsObjects};
//# sourceMappingURL=internal.esm.min.mjs.map
